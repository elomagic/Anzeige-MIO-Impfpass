{"version":3,"file":"MIOParser.stories-833019c9.js","sources":["../../src/stories/Development/MIOParser.stories.mdx"],"sourcesContent":["import { Meta } from \"@storybook/addon-docs\";\n\n<Meta title=\"Entwicklung/MIO Parser\" />\n\n# Integration des MIO Parsers\n\nDie KBV hat einen MIO Parser entwickelt, welcher als TypeScript Package eingebunden werden kann.\nDer Quellcode sowie die Dokumentation zur Nutzung sind im [MIO Parser GitHub Repository verfügbar](https://github.com/kassenaerztliche-bundesvereinigung/MIOParser).\n\nIm MIO-Anzeige Prototypen ist der MIO Parser für das Einlesen der MIO Dateien integriert.\nDie Funktionalitäten für das Lesen und Arbeiten mit den FHIR-Ressourcen (im Rahmen der MIO Parser Funktionalitäten) sind im Prototypen im Service `src/services/mioParser.tsx` gebündelt und werden in den Komponenten nach Bedarf importiert.\n\nDie Typen im MIO Parser sind basierend auf der FHIR-Spezifikation hierarchisch aufgebaut.\nFür den Prototypen zum MIO Impfpass 1.1.0 sind alle Typen im Modul `Vaccination.V1_1_0` enthalten.\nWelche Typen im MIO Parser verfügbar sind, ist durch die Editor-Integration von TypeScript in den meisten Editoren gut untersuchbar.\n\n## Konfiguration des Pfades zu den einzulesenden Daten\n\nDie App-Komponente (App.tsx) liest beim Start der React-App einmalig eine Konfigurationsdatei ein (config.json), welche im `public` Ordner liegt.\nDiese Konfigurationsdatei enthält den Pfad zu dein einzulesenden Daten. Aktuell wird ein einzelnes Bundle eingelesen, künftig können mehrere Bundles eingelesen werden (beispielsweise alle xml Dateien im Ordner). Hersteller können diese Konfigurationsdatei anpassen, um den Pfad zu einzulesenden Dateien zu ändern, jedoch sollten die Daten im \"public\" Ordner enthalten sein und der Pfad relativ zum \"public\" Ordner sein.\n\n## Einlesen der Daten durch den MIO Parser\n\nNachdem die App Komponente (App.tsx) die Konfigurationsdatei eingelesen hat, werden die XML-Daten entsprechend dem in der Konfiguration angegebenen Pfad per fetch() Funktion geladen.\nEs wird somit erwartet, dass die Daten auf dem Server der Web-App verfügbar sind.\n\nAnschließend werden nacheinander zunächst das komplette Bundle geladen und durch den MIO Parser eingelesen, anschließend wird der Patient extrahiert, gefolgt von den RecordPrime-Einträgen. Damit dies automatisch beim Start der Komponente geschieht und das Laden der Daten die Komponente zum erneuten Rendern bringt (visuelles Neuladen, damit die Daten korrekt in die Anzeige eingefügt werden), wird dies im \"useEffect\" Hook der React Komponente ausgeführt. Die Daten werden mit \"useState\" ReactHooks im State der Komponente gespeichert. Mehr zu ReactHooks hier: https://reactjs.org/docs/hooks-intro.html\n\n<img src=\"./useEffect.PNG\" alt=\"useEffect für Laden der Daten in React\" />\n\nÄhnlich ist die Verwendung der Patientendaten in der Vaccination-Header Komponente:\n\n<img src=\"./header.PNG\" alt=\"Header image für MIO Parser\" />\n"],"names":["MDXContent","props","MDXLayout","_provideComponents","_jsx","_createMdxContent","_components","_jsxs","_Fragment","Meta","__page","componentMeta","__namedExportsOrder"],"mappings":"mbAMA,SAASA,EAAWC,EAAQ,GAAI,CAC9B,KAAM,CACJ,QAASC,CACb,EAAM,OAAO,OAAO,CAAE,EAAEC,EAAkB,EAAIF,EAAM,UAAU,EAC5D,OAAOC,EAAyBE,EAAKF,EAAW,CAAE,GAAGD,EACnD,SAAuBG,EAAKC,EAAmB,EAAE,CACrD,CAAG,EAAIA,EAAiB,EAEtB,SAASA,GAAoB,CAC3B,MAAMC,EAAc,OAAO,OAAO,CAChC,GAAI,KACJ,EAAG,IACH,EAAG,IACH,KAAM,OACN,GAAI,IACL,EAAEH,EAAoB,EAAEF,EAAM,UAAU,EAEzC,OAAoBM,EAAMC,EAAW,CACnC,SAAU,CAAcJ,EAAKK,EAAM,CACjC,MAAO,wBACR,CAAA,EAAG;AAAA,EAAmBL,EAAKE,EAAY,GAAI,CAC1C,SAAU,6BACX,CAAA,EAAG;AAAA,EAAmBC,EAAMD,EAAY,EAAG,CAC1C,SAAU,CAAC;AAAA,4DAA6KF,EAAKE,EAAY,EAAG,CAC1M,KAAM,kEACN,SAAU,wCACX,CAAA,EAAG,GAAG,CACR,CAAA,EAAG;AAAA,EAAmBC,EAAMD,EAAY,EAAG,CAC1C,SAAU,CAAC;AAAA,oJAA8PF,EAAKE,EAAY,KAAM,CAC9R,SAAU,4BACX,CAAA,EAAG,kEAAkE,CACvE,CAAA,EAAG;AAAA,EAAmBC,EAAMD,EAAY,EAAG,CAC1C,SAAU,CAAC;AAAA,qEAA+KF,EAAKE,EAAY,KAAM,CAC/M,SAAU,oBACX,CAAA,EAAG;AAAA,qIAAmJ,CACxJ,CAAA,EAAG;AAAA,EAAmBF,EAAKE,EAAY,GAAI,CAC1C,SAAU,qDACX,CAAA,EAAG;AAAA,EAAmBC,EAAMD,EAAY,EAAG,CAC1C,SAAU,CAAC,8HAA4IF,EAAKE,EAAY,KAAM,CAC5K,SAAU,QACX,CAAA,EAAG;AAAA,oaAAyb,CAC9b,CAAA,EAAG;AAAA,EAAmBF,EAAKE,EAAY,GAAI,CAC1C,SAAU,yCACX,CAAA,EAAG;AAAA,EAAmBF,EAAKE,EAAY,EAAG,CACzC,SAAU;AAAA,kFACX,CAAA,EAAG;AAAA,EAAmBF,EAAKE,EAAY,EAAG,CACzC,SAAU,6lBAClB,CAAO,EAAG;AAAA,EAAmBF,EAAK,MAAO,CACjC,IAAK,kBACL,IAAK,wCACN,CAAA,EAAG;AAAA,EAAmBA,EAAKE,EAAY,EAAG,CACzC,SAAU,qFAClB,CAAO,EAAG;AAAA,EAAmBF,EAAK,MAAO,CACjC,IAAK,eACL,IAAK,6BACb,CAAO,CAAC,CACR,CAAK,CACF,CACH,CAIY,MAACM,EAAS,IAAM,CAC1B,MAAM,IAAI,MAAM,iBAAiB,CACnC,EACAA,EAAO,WAAa,CAClB,SAAU,EACZ,EACK,MAACC,EAAgB,CACpB,MAAO,yBACP,KAAM,CAAC,aAAa,EACpB,eAAgB,CAAC,QAAQ,CAC3B,EACAA,EAAc,WAAaA,EAAc,YAAc,GACvDA,EAAc,WAAW,KAAO,CAAE,GAAIA,EAAc,WAAW,MAAQ,GACrE,KAAMX,CACR,EAC4B,MAAAY,EAAA,CAAA,QAAA"}